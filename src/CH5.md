# CH5 数据库完整性//数据库的一致性：IC+业务规则（动态）

数据的完整性：
- 数据的正确性
- 数据的相容性
- 防止不合语义，不正确的数据

DMBS提供的三个功能：
- 定义**完整性约束**条件的机制
- 提供**完整性检查**的方法
- **违约处理**



完整性违规的处理方式；
- 用PRIMARY KEY定义了关系的主码后，每当用户对基本表插入一条记录或对主码进行更新操作时，DBMS将进行如下的检查：
	- 检查主码是否唯一，如果不唯一则拒绝插入或修改；
	- 检查主码的各个属性是否为空，只要有一个为空就拒绝插入或修改。
- 参照完整性检查和违约处理 PPT P31

完整性约束命名子句 CONSTRAINT的使用；PPT P38

叙述触发器的作用及使用方法；
- 触发器是用户定义在关系表上的一类由事件驱动的特殊过程。一旦定义，任何对表的增、删、改操作均由服务器自动激活相应的触发器。
	- 由服务器自动激活
	- 可以进行更为复杂的检查和操作，具有更精细和更强大的数据控制能力 
- 触发器的执行,是由触发事件激活的,并由数据库服务器自动执行的。一个表上可能定义了多个触发器，比如多个BEFORE触发器，多个AFTER触发器等。同一个表上的多个触发器激活时遵循如下的执行顺序：
	- 执行该表上的BEFORE触发器；
	- 激活触发器的SQL语句；
	- 执行该表上的AFTER触发器。
	- 对于同一种类型的BEFORE/AFTER触发器，按照“谁先创建谁先执行”的原则执行。

在SQL SERVER中，三类触发器。
- 插入触发器；
- 更新触发器；
- 删除触发器。